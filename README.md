# ChaosPVP (대혼란 PVP)

플러그인 다운:https://hangar.papermc.io/Dangel165/ChaosPVP

13개의 고유한 직업 시스템을 갖춘 PVP 플러그인입니다.

## 주요 기능

- **13개의 고유 직업**: 검사, 과학자, 역병 살포자, 방패 병사, 크리티컬 커터, 항해사, 선장, 생명체, 저글러, 용의 분노자, 언데드, 스탬퍼, 시간 각인자
- **직업별 고유 능력**: 각 직업마다 고유한 아이템, 능력, 패시브 효과 보유
- **자원 수집 시스템**: 자원을 모아 강력한 궁극기 해금 (검사, 과학자 등)
- **쿨타임 관리**: 액션바와 채팅으로 표시되는 균형잡힌 능력 쿨타임
- **팀전 & 개인전**: 드래프트 픽 방식의 팀전과 개인전 모두 지원
- **연습 모드**: 5분간 개별적으로 직업 테스트 가능 (실제 게임과 동일한 메커니즘)
- **데이터 자동 저장**: 모든 맵과 로비 설정이 실시간으로 자동 저장
- **게임 시간**: 10분 게임 진행

## 직업 소개

### 검사 (Swordsman)
여러 종류의 검을 사용하는 근접 전투 특화 직업입니다.
- **패시브**: 돌검 공격 시 +1 추가 피해
- **다이아 검**: 우클릭으로 전방 공격 - 8 피해 (4하트), 12.5초 쿨타임, 적중 시 네더라이트 파편 획득
- **궁극기**: 네더라이트 검 - 4 기본 + 16 즉시 피해 (네더라이트 파편 3개 수집, 최대 1개, 1회 사용)

### 과학자 (Scientist)
랜덤 물약 능력과 기동성을 갖춘 지원 직업입니다.
- **패시브**: 아이템 투척 시 신속 I (0.5초)
- **능력**: 7.5초마다 랜덤 투척 물약 생성 (최대 3개)
- **궁극기**: 잔류형 광역 물약 - 7블록 직경, 8초 지속, 본인 회복 + 적 피해 (궁극 재료 9개 수집)

### 역병 살포자 (Plague Spreader)
독 면역과 독성 필드로 지역을 장악하는 직업입니다.
- **패시브**: 독 피해 무효
- **맹독 엔진**: 20초마다 생성 (최대 2개), 사용 시 10초간 독 장판 (6블록 직경)
- **극독 엔진**: 100초마다 생성 (최대 1개), 사용 시 10초간 강화 독 장판 (8블록 직경)
- **특수**: 장판 내 본인 신속 버프, 적에게 즉시 피해 + 약화 + 독

### 방패 병사 (Shield Soldier)
방어 능력과 흡수 메커니즘을 갖춘 탱커 직업입니다.
- **패시브**: 12초간 피해 미받으면 흡수 2하트 획득 (60초 지속)
- **빨간 방패**: 막기 시 공격자에게 6 피해, 6초 쿨타임
- **파란 방패**: 막기 시 흡수 2하트 획득 (10초 지속), 11초 쿨타임
- **기본 방패**: 막기 시 공격자에게 약화 I (1.5초), 4초 쿨타임
- **황금 방패**: 체력 12 이하 시 자동 획득, 막기 시 힘 II + 신속 I + 흡수 6하트 (8초), 1회용

### 크리티컬 커터 (Critical Cutter)
점점 증가하는 치명타 메커니즘을 가진 폭딜 직업입니다.
- **패시브**: 5% 기본 치명타 확률 (비치명타마다 1% 증가)
- **무기**: 크리티컬 커터 검 (5.0 피해 = 2.5 하트, 돌검과 동일)
- **특수**: 치명타 시 2배 피해 + 2 HP 회복 (1하트)
- **확정 치명타**: 우클릭으로 전방 공격 - 6 기본 + 6 즉시 피해 + 6 HP 회복, 25초 쿨타임

### 항해사 (Navigator)
넉백 능력과 위치 제어에 특화된 기동성 직업입니다.
- **패시브**: 검에 넉백 I 효과
- **해전 무기**: 20초마다 생성 (최대 3개, 내구도 1) - 1 기본 + 4 즉시 피해, 넉백 II
- **파도 타기**: 신속 IV (1초), 충돌 시 넉백 + 둔화 V (1초), 12초 쿨타임
- **작살 투척**: 6 피해 + 둔화 V (1초), 15초 쿨타임 (빗나가면 50% 감소)

### 선장 (Captain)
팀원을 강화하고 지원하는 팀 서포터 직업입니다.
- **패시브**: 적 공격 시 랜덤 팀원에게 힘 I (2초) 부여 (솔로 모드에서는 자신)
- **선장의 명령**: 팀원에게 해전 무기 + 힘 I (5초) 부여, 15초 쿨타임
- **선장의 작살**: 4 피해, 적중 시 팀원 힘 I (3초) + 적 약화 I (3초) + 쿨타임 3초 감소, 9초 쿨타임

### 생명체 (Shapeshifter)
시간에 따라 진화하는 변신 직업입니다.
- **진화 단계**: 오셀롯 (0-1분) → 소 (1-2분) → 스니퍼 (2-4분) → 라바저 (4분+)
- **오셀롯**: 5하트, 신속 III, 약화 III
- **소**: 15하트, 3초마다 1하트 재생, 돌검 획득
- **스니퍼**: 25하트, 저항 I, 철검 획득
- **라바저**: 35하트, 저항 II, 힘 I
- **돌진**: 모든 단계에서 사용 가능 - 신속 V (0.4초), 충돌 시 둔화 V (0.5초), 7초 쿨타임

### 저글러 (Juggler)
투척 전문 직업으로 다양한 투사체를 사용합니다.
- **패시브**: 시작 시 돌검 없음, 60초마다 "투척 시간" 1개 획득 (최대 1개)
- **가벼운 것**: 눈덩이 투척 - 1 피해 (0.5하트), 넉백 없음, 4초 쿨타임 (적중 시 초기화)
- **무거운 것**: 바람 탄환 투척 - 8 피해 (4하트), 둔화 V (1초) + 실명 (1초), 13초 쿨타임
- **투척 시간**: 10블록 내 모든 적에게 둔화 V (2.5초) + 가벼운 것 쿨타임 초기화 (소모품)

### 용의 분노자 (Dragon Fury)
역린을 모아 강력한 반격을 가하는 직업입니다.
- **패시브**: 피해 받을 때마다 역린 +1 (최대 30개), 8초마다 자동 생성 +1
- **역린 수에 따른 저항**: 0-10개 저항 I, 11-20개 저항 II, 21-30개 저항 III
- **역린의 반격**: 5블록 내 가장 가까운 적에게 역린 수만큼 피해, 처치 시 역린/2 만큼 체력 회복, 30초 쿨타임
- **시작 아이템**: 철 갑옷 세트, 힘 I + 저항 I 영구 효과

### 언데드 (Undead)
죽음을 극복하는 특수 직업입니다.
- **패시브**: 첫 사망 시 즉시 부활 (게임당 1회)
- **부활 효과**: 최대 체력으로 부활, 신속 I + 힘 II + 저항 V 획득
- **부활 페널티**: 3초 후부터 0.25초마다 1 피해 (0.5하트) 지속 (두 번째 사망까지)

### 스탬퍼 (Stamper)
공중 기동과 낙하 공격에 특화된 직업입니다.
- **패시브**: 낙하 피해 무효, 3블록 이상 낙하 시 4블록 내 적에게 6 피해 (히트박스 겹치면 12 피해)
- **도장 찍기**: 무거운 코어 우클릭 - 10칸 높이로 솟아오름, 20초 쿨타임
- **다이브**: 무거운 코어 우클릭 - 40칸 높이로 솟아오름, 착지 시 20블록 내 적에게 16 피해 (히트박스 겹치면 32 피해), 200초마다 획득 (최대 1개, 소모품)

### 시간 각인자 (Time Engraver)
시간을 조작하여 적을 제어하는 직업입니다.
- **패시브**: 구속 면역
- **시간 각인**: 8칸 범위 내 모든 적 2초 완전 위치 고정 + 약화 I (1.5초), 적중 수만큼 시간 박제 획득, 16초 쿨타임
- **시곗바늘 꿰메기**: 화살 투척 - 6 피해 (3하트), 구속 대상에게 8 피해 (4하트) + 어둠/실명 (3초), 12초 쿨타임 (영원한 시계 중 1초)
- **영원한 시계**: 8초간 모든 플레이어와 몹 완전 위치 고정 + 둔화 V + 어둠 + 실명, 모든 투사체 정지 (시간 박제 7개 수집, 소모품)

## 설치 방법

1. 최신 릴리스 다운로드
2. JAR 파일을 서버의 `plugins` 폴더에 배치
3. **필수 플러그인 설치**:
   - LibsDisguises (생명체 직업에 필수)
   - ProtocolLib (LibsDisguises 의존성)
4. **선택 플러그인 설치** (권장):
   - Multiverse-Core (게임 후 월드 자동 리셋)
5. 서버 재시작
6. `plugins/ChaosPVP/data.yml`에서 설정 확인

## 명령어

### 게임 관련
- `/게임시작` - 직업 선택 GUI 열기
- `/게임종료` - 게임 종료 및 모든 플레이어 초기화 (관리자)
- `/게임모드 <팀전|개인전>` - 게임 모드 설정 (관리자)

### 연습 모드
- `/연습모드시작` - 연습 모드 시작 (직업 선택)
- `/연습모드종료` - 연습 모드 종료
- `/연습클래스` - 연습 모드에서 직업 변경
- `/연습모드 맵 <맵이름>` - 연습 모드 맵 지정 (관리자)
- `/연습모드` - 연습 모드 맵으로 이동

### 맵 관리
- `/로비` - 로비로 이동
- `/로비 지정` - 현재 위치를 로비로 지정 (관리자)
- `/로비제거` - 로비 위치 제거 (관리자)
- `/맵지정 [맵이름]` - 맵 스폰 위치 지정 (관리자)
- `/맵제거 <번호>` - 맵 제거 (관리자)

### 플레이어 관리
- `/인원제외 <플레이어명>` - 플레이어를 게임에서 제외 (관리자)
- `/인원추가 <플레이어명>` - 제외된 플레이어를 다시 추가 (관리자)

### 기타
- `/도움말` - 도움말 메시지 표시
- `/입자끄기` - 모든 독 필드 제거 (관리자)
- `/chaospvp` - ChaosPVP 메인 명령어 (별칭: /cpvp, /cp)

## 권한

- `chaospvp.use` - 기본 명령어 사용 허용 (기본값: true)
- `chaospvp.admin` - 관리자 명령어 사용 허용 (기본값: op)

## 필수 요구사항

- **마인크래프트 서버**: Paper 1.21.11 
- **Java**: 21 이상
- **필수 플러그인**: 
  - LibsDisguises (생명체 직업용)
  - ProtocolLib (LibsDisguises 의존성)
- **선택 플러그인**:
  - Multiverse-Core (게임 후 월드 자동 리셋 기능)

## 게임 플레이

### 게임 시작
1. `/게임모드 팀전` 또는 `/게임모드 개인전`으로 모드 선택
2. `/게임시작`으로 직업 선택
3. 팀전의 경우 팀 선택 GUI에서 팀 선택 (드래프트 픽 방식)
4. 모든 플레이어가 준비되면 자동으로 게임 시작

### 게임 진행
- 게임 시간: 10분
- 각 직업의 능력을 활용하여 전투
- 자원을 모아 궁극기 해금
- 마지막 생존자 또는 팀이 승리

### 연습 모드
- `/연습모드시작` 또는 `/연습모드`로 시작
- 개별적으로 직업 테스트 가능
- 실제 게임과 동일한 메커니즘
- `/연습클래스`로 언제든지 직업 변경 가능
- 5분 쿨타임 (다음 연습 모드 시작까지)

## 개발

이 플러그인은 다음을 사용합니다:
- **Paper API 1.21.11** - 마인크래프트 서버 통합
- **LibsDisguises** - 생명체 직업 변신 기능
- **Gradle 8.5** - 빌드 자동화
- **Java 21** - 프로그래밍 언어
- **JUnit 5** - 단위 테스트 프레임워크
- **Mockito 5.8** - 모킹 프레임워크
- **jqwik 1.8** - 속성 기반 테스트

## 데이터 저장

모든 맵과 로비 설정은 `plugins/ChaosPVP/data.yml`에 자동으로 저장됩니다.
- 로비 위치 및 이름
- 일반 맵 목록 (위치 및 이름)
- 연습 모드 맵 (위치 및 이름)

설정 변경 시 실시간으로 자동 저장되며, 서버 재시작 시 자동으로 로드됩니다.

## 밸런스 변경 사항

### v3.0 (최신)
- **버그 수정**: 게임 종료 시 OP 권한이 복구되지 않던 문제 수정 (중복 OP 저장 로직 제거)
- **버그 수정**: 연습모드 중 게임 시작 시 연습모드 아이템이 제거되지 않던 문제 수정
- **버그 수정**: 팀 선택 GUI에 팀 랜덤 배정 기능 추가

### v2.0
- **스탬퍼**: 도장 찍기 쿨타임 12초 → 20초
- **스탬퍼**: 다이브 획득 시간 120초 → 200초
- **스탬퍼**: 도장 찍기 높이 20칸 → 10칸
- **스탬퍼**: 다이브 높이 80칸 → 40칸
- **스탬퍼**: 다이브 피해량 12 (6칸) → 16 (8칸)
- **스탬퍼**: 패시브 착지 피해 4 (2칸) → 6 (3칸)
- **스탬퍼**: 도장 찍기 아이템 깃털 → 무거운 코어
- **시간 각인자**: 시간 각인 범위 5칸 → 8칸
- **시간 각인자**: 시간 각인 구속 1초 → 2초 (완전 위치 고정)
- **시간 각인자**: 시곗바늘 기본 피해 10 → 6
- **시간 각인자**: 시곗바늘 보너스 피해 6 → 8
- **시간 각인자**: 시곗바늘 꿰메기 추가 (화살 투척, 어둠/실명 효과)
- **시간 각인자**: 영원한 시계 완전 위치 고정 추가
- **항해사**: 파도 타기 구속을 완전 위치 고정 → 단순 구속 V 효과
- **팀 선택**: 드래프트 픽 방식 추가
- **버그 수정**: 게임 종료 후 팀 발광 효과 미제거 수정
- **버그 수정**: 팀 표시 오류 수정

### v1.0
- **검사**: 구리검 쿨타임 15초 → 24초, 금검 14초 → 22초, 다이아검 13초 → 20초
- **검사**: 네더라이트 검 최대 1개로 제한
- **검사**: 쿨타임 표시를 보스바에서 채팅으로 변경
- **크리티컬 커터**: 크리티컬 커터 검 피해량 수정 (돌검과 동일 → 5.0 피해)
- **크리티컬 커터**: 확정 치명타 쿨타임 6초 → 25초
- **생명체**: 돌진 능력 추가 (모든 진화 단계)
- **연습 모드**: 실제 게임과 동일한 메커니즘으로 재설계
- **연습 모드**: 사망 시 연습 맵으로 복귀 및 자동 종료

## 라이선스

MIT 라이선스

## 제작자

- **플러그인 제작**: Dangel
- **맵 제작**: 145wir, ssadw1348, gyangsongsanghyeoninde
- **밸런스 조정**: 145wir
- **기획**: 145wir, ssadw1348 


